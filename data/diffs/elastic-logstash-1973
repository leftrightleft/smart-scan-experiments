diff --git a/spec/core/conditionals_spec.rb b/spec/integrations/conditionals_spec.rb
similarity index 100%
rename from spec/core/conditionals_spec.rb
rename to spec/integrations/conditionals_spec.rb
diff --git a/spec/codecs/collectd_spec.rb b/spec/logstash/codecs/collectd_spec.rb
similarity index 100%
rename from spec/codecs/collectd_spec.rb
rename to spec/logstash/codecs/collectd_spec.rb
diff --git a/spec/codecs/edn_lines_spec.rb b/spec/logstash/codecs/edn_lines_spec.rb
similarity index 100%
rename from spec/codecs/edn_lines_spec.rb
rename to spec/logstash/codecs/edn_lines_spec.rb
diff --git a/spec/codecs/edn_spec.rb b/spec/logstash/codecs/edn_spec.rb
similarity index 100%
rename from spec/codecs/edn_spec.rb
rename to spec/logstash/codecs/edn_spec.rb
diff --git a/spec/codecs/graphite_spec.rb b/spec/logstash/codecs/graphite_spec.rb
similarity index 100%
rename from spec/codecs/graphite_spec.rb
rename to spec/logstash/codecs/graphite_spec.rb
diff --git a/spec/codecs/json_lines_spec.rb b/spec/logstash/codecs/json_lines_spec.rb
similarity index 100%
rename from spec/codecs/json_lines_spec.rb
rename to spec/logstash/codecs/json_lines_spec.rb
diff --git a/spec/codecs/json_spec.rb b/spec/logstash/codecs/json_spec.rb
similarity index 100%
rename from spec/codecs/json_spec.rb
rename to spec/logstash/codecs/json_spec.rb
diff --git a/spec/codecs/json_spooler_spec.rb b/spec/logstash/codecs/json_spooler_spec.rb
similarity index 100%
rename from spec/codecs/json_spooler_spec.rb
rename to spec/logstash/codecs/json_spooler_spec.rb
diff --git a/spec/codecs/line_spec.rb b/spec/logstash/codecs/line_spec.rb
similarity index 100%
rename from spec/codecs/line_spec.rb
rename to spec/logstash/codecs/line_spec.rb
diff --git a/spec/codecs/msgpack_spec.rb b/spec/logstash/codecs/msgpack_spec.rb
similarity index 100%
rename from spec/codecs/msgpack_spec.rb
rename to spec/logstash/codecs/msgpack_spec.rb
diff --git a/spec/codecs/multiline_spec.rb b/spec/logstash/codecs/multiline_spec.rb
similarity index 100%
rename from spec/codecs/multiline_spec.rb
rename to spec/logstash/codecs/multiline_spec.rb
diff --git a/spec/codecs/oldlogstashjson_spec.rb b/spec/logstash/codecs/oldlogstashjson_spec.rb
similarity index 100%
rename from spec/codecs/oldlogstashjson_spec.rb
rename to spec/logstash/codecs/oldlogstashjson_spec.rb
diff --git a/spec/codecs/plain_spec.rb b/spec/logstash/codecs/plain_spec.rb
similarity index 100%
rename from spec/codecs/plain_spec.rb
rename to spec/logstash/codecs/plain_spec.rb
diff --git a/spec/codecs/spool_spec.rb b/spec/logstash/codecs/spool_spec.rb
similarity index 100%
rename from spec/codecs/spool_spec.rb
rename to spec/logstash/codecs/spool_spec.rb
diff --git a/spec/core/config_spec.rb b/spec/logstash/config/grammar_spec.rb
similarity index 100%
rename from spec/core/config_spec.rb
rename to spec/logstash/config/grammar_spec.rb
diff --git a/spec/core/event_spec.rb b/spec/logstash/event_spec.rb
similarity index 100%
rename from spec/core/event_spec.rb
rename to spec/logstash/event_spec.rb
diff --git a/spec/filters/anonymize_spec.rb b/spec/logstash/filters/anonymize_spec.rb
similarity index 100%
rename from spec/filters/anonymize_spec.rb
rename to spec/logstash/filters/anonymize_spec.rb
diff --git a/spec/filters/checksum_spec.rb b/spec/logstash/filters/checksum_spec.rb
similarity index 100%
rename from spec/filters/checksum_spec.rb
rename to spec/logstash/filters/checksum_spec.rb
diff --git a/spec/filters/clone_spec.rb b/spec/logstash/filters/clone_spec.rb
similarity index 100%
rename from spec/filters/clone_spec.rb
rename to spec/logstash/filters/clone_spec.rb
diff --git a/spec/filters/csv_spec.rb b/spec/logstash/filters/csv_spec.rb
similarity index 100%
rename from spec/filters/csv_spec.rb
rename to spec/logstash/filters/csv_spec.rb
diff --git a/spec/filters/date_spec.rb b/spec/logstash/filters/date_spec.rb
similarity index 100%
rename from spec/filters/date_spec.rb
rename to spec/logstash/filters/date_spec.rb
diff --git a/spec/filters/dns_spec.rb b/spec/logstash/filters/dns_spec.rb
similarity index 100%
rename from spec/filters/dns_spec.rb
rename to spec/logstash/filters/dns_spec.rb
diff --git a/spec/filters/drop_spec.rb b/spec/logstash/filters/drop_spec.rb
similarity index 100%
rename from spec/filters/drop_spec.rb
rename to spec/logstash/filters/drop_spec.rb
diff --git a/spec/filters/filter_chains_spec.rb b/spec/logstash/filters/filter_chains_spec.rb
similarity index 100%
rename from spec/filters/filter_chains_spec.rb
rename to spec/logstash/filters/filter_chains_spec.rb
diff --git a/spec/filters/fingerprint_spec.rb b/spec/logstash/filters/fingerprint_spec.rb
similarity index 100%
rename from spec/filters/fingerprint_spec.rb
rename to spec/logstash/filters/fingerprint_spec.rb
diff --git a/spec/filters/geoip_spec.rb b/spec/logstash/filters/geoip_spec.rb
similarity index 100%
rename from spec/filters/geoip_spec.rb
rename to spec/logstash/filters/geoip_spec.rb
diff --git a/spec/filters/grok-patterns/java_spec.rb b/spec/logstash/filters/grok-patterns/java_spec.rb
similarity index 100%
rename from spec/filters/grok-patterns/java_spec.rb
rename to spec/logstash/filters/grok-patterns/java_spec.rb
diff --git a/spec/filters/grok/timeout1_spec.rb b/spec/logstash/filters/grok/timeout1_spec.rb
similarity index 99%
rename from spec/filters/grok/timeout1_spec.rb
rename to spec/logstash/filters/grok/timeout1_spec.rb
index 3d165856184..e3ff0cc1f20 100644
--- a/spec/filters/grok/timeout1_spec.rb
+++ b/spec/logstash/filters/grok/timeout1_spec.rb
@@ -6,7 +6,7 @@
   describe "more apache log timeouts" do
     subject { Grok.new }
     before :each do
-      patterns = Dir.glob(File.join(File.dirname(__FILE__), "../../../patterns/*"))
+      patterns = Dir.glob(File.join(File.dirname(__FILE__), "../../../../patterns/*"))
       patterns.each { |path| subject.add_patterns_from_file(path) }
       subject.add_pattern("RESPONSE_BYTES", '[0-9_-]+')
       subject.add_pattern("POST_CONN_STATUS", '[+-X]')
diff --git a/spec/filters/grok/timeout2_spec.rb b/spec/logstash/filters/grok/timeout2_spec.rb
similarity index 100%
rename from spec/filters/grok/timeout2_spec.rb
rename to spec/logstash/filters/grok/timeout2_spec.rb
diff --git a/spec/filters/grok_spec.rb b/spec/logstash/filters/grok_spec.rb
similarity index 100%
rename from spec/filters/grok_spec.rb
rename to spec/logstash/filters/grok_spec.rb
diff --git a/spec/filters/json_spec.rb b/spec/logstash/filters/json_spec.rb
similarity index 100%
rename from spec/filters/json_spec.rb
rename to spec/logstash/filters/json_spec.rb
diff --git a/spec/filters/kv_spec.rb b/spec/logstash/filters/kv_spec.rb
similarity index 100%
rename from spec/filters/kv_spec.rb
rename to spec/logstash/filters/kv_spec.rb
diff --git a/spec/filters/metrics_spec.rb b/spec/logstash/filters/metrics_spec.rb
similarity index 100%
rename from spec/filters/metrics_spec.rb
rename to spec/logstash/filters/metrics_spec.rb
diff --git a/spec/filters/multiline_spec.rb b/spec/logstash/filters/multiline_spec.rb
similarity index 100%
rename from spec/filters/multiline_spec.rb
rename to spec/logstash/filters/multiline_spec.rb
diff --git a/spec/filters/mutate_spec.rb b/spec/logstash/filters/mutate_spec.rb
similarity index 100%
rename from spec/filters/mutate_spec.rb
rename to spec/logstash/filters/mutate_spec.rb
diff --git a/spec/filters/noop_spec.rb b/spec/logstash/filters/noop_spec.rb
similarity index 100%
rename from spec/filters/noop_spec.rb
rename to spec/logstash/filters/noop_spec.rb
diff --git a/spec/filters/ruby_spec.rb b/spec/logstash/filters/ruby_spec.rb
similarity index 100%
rename from spec/filters/ruby_spec.rb
rename to spec/logstash/filters/ruby_spec.rb
diff --git a/spec/filters/split_spec.rb b/spec/logstash/filters/split_spec.rb
similarity index 100%
rename from spec/filters/split_spec.rb
rename to spec/logstash/filters/split_spec.rb
diff --git a/spec/filters/spool_spec.rb b/spec/logstash/filters/spool_spec.rb
similarity index 100%
rename from spec/filters/spool_spec.rb
rename to spec/logstash/filters/spool_spec.rb
diff --git a/spec/filters/throttle_spec.rb b/spec/logstash/filters/throttle_spec.rb
similarity index 100%
rename from spec/filters/throttle_spec.rb
rename to spec/logstash/filters/throttle_spec.rb
diff --git a/spec/filters/urldecode_spec.rb b/spec/logstash/filters/urldecode_spec.rb
similarity index 100%
rename from spec/filters/urldecode_spec.rb
rename to spec/logstash/filters/urldecode_spec.rb
diff --git a/spec/filters/useragent_spec.rb b/spec/logstash/filters/useragent_spec.rb
similarity index 100%
rename from spec/filters/useragent_spec.rb
rename to spec/logstash/filters/useragent_spec.rb
diff --git a/spec/filters/xml_spec.rb b/spec/logstash/filters/xml_spec.rb
similarity index 100%
rename from spec/filters/xml_spec.rb
rename to spec/logstash/filters/xml_spec.rb
diff --git a/spec/inputs/base_spec.rb b/spec/logstash/inputs/base_spec.rb
similarity index 100%
rename from spec/inputs/base_spec.rb
rename to spec/logstash/inputs/base_spec.rb
diff --git a/spec/inputs/collectd_spec.rb b/spec/logstash/inputs/collectd_spec.rb
similarity index 100%
rename from spec/inputs/collectd_spec.rb
rename to spec/logstash/inputs/collectd_spec.rb
diff --git a/spec/inputs/elasticsearch_spec.rb b/spec/logstash/inputs/elasticsearch_spec.rb
similarity index 100%
rename from spec/inputs/elasticsearch_spec.rb
rename to spec/logstash/inputs/elasticsearch_spec.rb
diff --git a/spec/inputs/file_spec.rb b/spec/logstash/inputs/file_spec.rb
similarity index 100%
rename from spec/inputs/file_spec.rb
rename to spec/logstash/inputs/file_spec.rb
diff --git a/spec/inputs/gelf_spec.rb b/spec/logstash/inputs/gelf_spec.rb
similarity index 100%
rename from spec/inputs/gelf_spec.rb
rename to spec/logstash/inputs/gelf_spec.rb
diff --git a/spec/inputs/generator_spec.rb b/spec/logstash/inputs/generator_spec.rb
similarity index 100%
rename from spec/inputs/generator_spec.rb
rename to spec/logstash/inputs/generator_spec.rb
diff --git a/spec/inputs/imap_spec.rb b/spec/logstash/inputs/imap_spec.rb
similarity index 100%
rename from spec/inputs/imap_spec.rb
rename to spec/logstash/inputs/imap_spec.rb
diff --git a/spec/inputs/log4j_spec.rb b/spec/logstash/inputs/log4j_spec.rb
similarity index 100%
rename from spec/inputs/log4j_spec.rb
rename to spec/logstash/inputs/log4j_spec.rb
diff --git a/spec/inputs/pipe_spec.rb b/spec/logstash/inputs/pipe_spec.rb
similarity index 100%
rename from spec/inputs/pipe_spec.rb
rename to spec/logstash/inputs/pipe_spec.rb
diff --git a/spec/inputs/redis_spec.rb b/spec/logstash/inputs/redis_spec.rb
similarity index 100%
rename from spec/inputs/redis_spec.rb
rename to spec/logstash/inputs/redis_spec.rb
diff --git a/spec/inputs/stdin_spec.rb b/spec/logstash/inputs/stdin_spec.rb
similarity index 100%
rename from spec/inputs/stdin_spec.rb
rename to spec/logstash/inputs/stdin_spec.rb
diff --git a/spec/inputs/syslog_spec.rb b/spec/logstash/inputs/syslog_spec.rb
similarity index 100%
rename from spec/inputs/syslog_spec.rb
rename to spec/logstash/inputs/syslog_spec.rb
diff --git a/spec/inputs/tcp_spec.rb b/spec/logstash/inputs/tcp_spec.rb
similarity index 100%
rename from spec/inputs/tcp_spec.rb
rename to spec/logstash/inputs/tcp_spec.rb
diff --git a/spec/core/web_spec.rb b/spec/logstash/kibana_spec.rb
similarity index 100%
rename from spec/core/web_spec.rb
rename to spec/logstash/kibana_spec.rb
diff --git a/spec/outputs/cloudwatch_spec.rb b/spec/logstash/outputs/cloudwatch_spec.rb
similarity index 100%
rename from spec/outputs/cloudwatch_spec.rb
rename to spec/logstash/outputs/cloudwatch_spec.rb
diff --git a/spec/outputs/csv_spec.rb b/spec/logstash/outputs/csv_spec.rb
similarity index 100%
rename from spec/outputs/csv_spec.rb
rename to spec/logstash/outputs/csv_spec.rb
diff --git a/spec/outputs/elasticsearch_http_spec.rb b/spec/logstash/outputs/elasticsearch_http_spec.rb
similarity index 100%
rename from spec/outputs/elasticsearch_http_spec.rb
rename to spec/logstash/outputs/elasticsearch_http_spec.rb
diff --git a/spec/outputs/elasticsearch_river_spec.rb b/spec/logstash/outputs/elasticsearch_river_spec.rb
similarity index 100%
rename from spec/outputs/elasticsearch_river_spec.rb
rename to spec/logstash/outputs/elasticsearch_river_spec.rb
diff --git a/spec/outputs/elasticsearch_spec.rb b/spec/logstash/outputs/elasticsearch_spec.rb
similarity index 100%
rename from spec/outputs/elasticsearch_spec.rb
rename to spec/logstash/outputs/elasticsearch_spec.rb
diff --git a/spec/outputs/email_spec.rb b/spec/logstash/outputs/email_spec.rb
similarity index 100%
rename from spec/outputs/email_spec.rb
rename to spec/logstash/outputs/email_spec.rb
diff --git a/spec/outputs/file_spec.rb b/spec/logstash/outputs/file_spec.rb
similarity index 100%
rename from spec/outputs/file_spec.rb
rename to spec/logstash/outputs/file_spec.rb
diff --git a/spec/outputs/graphite_spec.rb b/spec/logstash/outputs/graphite_spec.rb
similarity index 100%
rename from spec/outputs/graphite_spec.rb
rename to spec/logstash/outputs/graphite_spec.rb
diff --git a/spec/outputs/redis_spec.rb b/spec/logstash/outputs/redis_spec.rb
similarity index 100%
rename from spec/outputs/redis_spec.rb
rename to spec/logstash/outputs/redis_spec.rb
diff --git a/spec/outputs/statsd_spec.rb b/spec/logstash/outputs/statsd_spec.rb
similarity index 100%
rename from spec/outputs/statsd_spec.rb
rename to spec/logstash/outputs/statsd_spec.rb
diff --git a/spec/core/runner_spec.rb b/spec/logstash/runner_spec.rb
similarity index 100%
rename from spec/core/runner_spec.rb
rename to spec/logstash/runner_spec.rb
diff --git a/spec/core/timestamp_spec.rb b/spec/logstash/timestamp_spec.rb
similarity index 100%
rename from spec/core/timestamp_spec.rb
rename to spec/logstash/timestamp_spec.rb
diff --git a/spec/util/accessors_spec.rb b/spec/logstash/util/accessors_spec.rb
similarity index 100%
rename from spec/util/accessors_spec.rb
rename to spec/logstash/util/accessors_spec.rb
diff --git a/spec/util/charset_spec.rb b/spec/logstash/util/charset_spec.rb
similarity index 100%
rename from spec/util/charset_spec.rb
rename to spec/logstash/util/charset_spec.rb
diff --git a/spec/util/environment_spec.rb b/spec/logstash/util/environment_spec.rb
similarity index 100%
rename from spec/util/environment_spec.rb
rename to spec/logstash/util/environment_spec.rb
diff --git a/spec/util/fieldeval_spec.rb b/spec/logstash/util/fieldeval_spec.rb
similarity index 100%
rename from spec/util/fieldeval_spec.rb
rename to spec/logstash/util/fieldeval_spec.rb
diff --git a/spec/util/jar_spec.rb b/spec/logstash/util/jar_spec.rb
similarity index 100%
rename from spec/util/jar_spec.rb
rename to spec/logstash/util/jar_spec.rb
diff --git a/spec/util/json_spec.rb b/spec/logstash/util/json_spec.rb
similarity index 100%
rename from spec/util/json_spec.rb
rename to spec/logstash/util/json_spec.rb
diff --git a/spec/util_spec.rb b/spec/logstash/util_spec.rb
similarity index 100%
rename from spec/util_spec.rb
rename to spec/logstash/util_spec.rb
