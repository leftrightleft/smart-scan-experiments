diff --git a/logstash-core/build.gradle b/logstash-core/build.gradle
index 36160e16149..41f223896d2 100644
--- a/logstash-core/build.gradle
+++ b/logstash-core/build.gradle
@@ -21,20 +21,20 @@ buildscript {
     }
 }
 
-task sourcesJar(type: org.gradle.api.tasks.bundling.Jar, dependsOn: classes) {
+task sourcesJar(type: Jar, dependsOn: classes) {
     from sourceSets.main.allSource
     classifier 'sources'
     extension 'jar'
 }
 
-task javadocJar(type: org.gradle.api.tasks.bundling.Jar, dependsOn: javadoc) {
+task javadocJar(type: Jar, dependsOn: javadoc) {
     from javadoc.destinationDir
     classifier 'javadoc'
     extension 'jar'
 }
 
 // copy jar file into the gem lib dir but without the version number in filename
-task copyGemjar(type: org.gradle.api.tasks.Copy, dependsOn: sourcesJar) {
+task copyGemjar(type: Copy, dependsOn: sourcesJar) {
     from project.jar
     into project.file('lib/logstash-core/')
     rename(/(.+)-${project.version}.jar/, '$1.jar')
@@ -49,9 +49,10 @@ task cleanGemjar {
 clean.dependsOn(cleanGemjar)
 jar.finalizedBy(copyGemjar)
 task gemspec_jars {
+    def gemspecJars = file("${projectDir}/gemspec_jars.rb")
+    outputs.files gemspecJars
     doLast {
-        File gemspec_jars = file("./gemspec_jars.rb")
-        gemspec_jars.newWriter().withWriter { w ->
+        gemspecJars.newWriter().withWriter { w ->
             w << "# This file is generated by Gradle as part of the build process. It extracts the build.gradle\n"
                 w << "# runtime dependencies to generate this gemspec dependencies file to be eval'ed by the gemspec\n"
                 w << "# for the jar-dependencies requirements.\n\n"
@@ -61,7 +62,8 @@ task gemspec_jars {
         }
     }
 }
-build.finalizedBy(gemspec_jars)
+
+compileJava.dependsOn gemspec_jars
 
 configurations.create('sources')
 configurations.create('javadoc')
